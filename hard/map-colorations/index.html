<h1>Map Colorations</h1>

<a href="https://www.codingame.com/training/hard/map-colorations">https://www.codingame.com/training/hard/map-colorations</a>

<div class="statement-body">
<div class="statement-section statement-goal">
   <h2><span class="icon icon-goal">&nbsp;</span><span>Goal </span></h2>
   <span class="question-statement">It is a well known result that a map, split into different regions (countries, states, ...) can be painted using different colors on contiguous regions with at most 4 different colors (see https://en.wikipedia.org/wiki/Four_color_theorem), although the proof isn't really obvious...<br><br>But in how many ways can it be painted?<br><br>You are given a &quot;map&quot;, simplified to <var>N</var> neighborhood relationships (<var>regionA</var> <var>regionB</var>, space separated).<br><br>You are also given a list of integers, corresponding to available colors.<br>The goal is, for each integer <var>C</var> in the list, to compute in how many ways the map can be painted using at most <var>C</var> colors.<br><br><br><strong>Example:</strong> Consider a map with 4 regions in a square<br><pre style="font-family: monospace">A-B<br>| |<br>D-C</pre><br>One definition can be (<var>N</var> = 4)<br><pre style="font-family: monospace">A B<br>A D<br>C B<br>C D</pre><br>Given 1 single color, there is no way to paint it.<br>Using 2 colors, there are 2 ways: A = C = first color and B = D = second color; or the opposite.<br>Given 5 different colors, there are <br>* 5 possible colors for A<br>* 4 possible colors for B<br>* considering B and D are the same, there is one possibility for D, and then 4 possible colors for C (not B = not D)<br>* considering B and D aren't the same, there are 3 possible colors for D, and then 3 possible colors for C (not B and not D)<br>Total = 5 &times; 4 &times; (1&times;4 + 3&times;3) = 260 ways to paint the map.<br><br>So, for such map and an entry <const>1 2 5</const>, answer will be:<br><pre style="font-family: monospace">0<br>2<br>260</pre></span>
</div>
<div class="statement-section statement-protocol">
   <div class="blk">
      <div class="title">Input</div>
      <div class="question-statement-input"><strong>First line:</strong> <var>N</var>, number of neighborhood relationships<br><strong>Next <var>N</var> lines:</strong> 2 neighbor entity names, space separated<br><strong>Next line:</strong> <var>K</var>, number of color sets<br><strong>Next <var>K</var> lines:</strong> an integer <var>C</var>, number of colors available</div>
   </div>
   <div class="blk">
      <div class="title">Output</div>
      <div class="question-statement-output"><strong><var>K</var> lines:</strong> Painting configuration counts for this map using <var>C</var> colors for each value of <var>C</var></div>
   </div>
   <div class="blk">
      <div class="title">Constraints</div>
      <div class="question-statement-constraints">1 &le; <var>N</var> &le; 25<br>1 &le; <var>K</var> &le; 10<br>1 &le; <var>C</var> &le; 1000<br><br><strong>Note:</strong> For the given test cases, all results are &lt; 2^32.</div>
   </div>
   <div class="blk">
      <div class="title">Example</div>
      <div class="statement-inout">
         <div class="statement-inout-in">
            <div class="title">Input</div>
            <pre class="question-statement-example-in">4
A B
A D
C B
C D
8
1
3
5
7
9
11
13
15</pre>
         </div>
         <div class="statement-inout-out">
            <div class="title">Output</div>
            <pre class="question-statement-example-out">0
18
260
1302
4104
10010
20748
38430</pre>
         </div>
      </div>
   </div>
</div>