<h1>CGX Formatter</h1>

<a href="https://www.codingame.com/training/hard/cgx-formatter">https://www.codingame.com/training/hard/cgx-formatter</a>

<div class="statement_wrapping_div">
<p dir="ltr" style="margin-top: 0pt; margin-bottom: 0pt;">At CodinGame we like to reinvent things. XML, JSON etc. that&rsquo;s great, but for a better web, we&rsquo;ve invented our own text data format (called CGX) to represent structured information.</p>
<br />
Here is an example of data structured with CGX:​
<div style="border: 1px dashed; margin: 10px"><img src="fileservlet?id=296581345074" /></div>

<div style="text-align: center;">Example of CGX formatted content.</div>
&nbsp;

  <div style="border: 1px dashed; margin: 10px; padding: 10px; background-color: #eee"><img src="fileservlet?id=296604210021" /></div>

<div style="text-align: center;">Graphical representation of the example.</div>
&nbsp;&nbsp;<br />
​<br />
<span style="line-height: 1.6em;">CGX content is composed of </span><span style="line-height: 1.6em; font-family: monospace;">ELEMENT</span><span style="line-height: 1.6em;">s.</span><br />
<br />
<strong>ELEMENT</strong><br />
An <span style="font-family: monospace">ELEMENT</span> can be of any of the following types <span style="font-family: monospace">BLOCK</span>, <span style="font-family: monospace">PRIMITIVE_TYPE</span> or <span style="font-family: monospace">KEY_VALUE</span>.<br />
<br />
<strong>BLOCK</strong><br />
A sequence of <span style="font-family: monospace">ELEMENT</span>s separated by the character <code>;</code><br />
A <span style="font-family: monospace">BLOCK</span> starts with the marker <code>(</code> and ends with the marker <code>)</code>.<br />
<br />
<b>PRIMITIVE_TYPE</b><br />
A <span style="font-family: monospace">number</span>, a <span style="font-family: monospace">Boolean</span>, <span style="font-family: monospace">null</span>, or a <span style="font-family: monospace">string of characters</span> (surrounded by the marker <code>&#39;</code>)<br />
<br />
<b>KEY_VALUE</b><br />
A <span style="font-family: monospace">string of characters</span> separated from a <span style="font-family: monospace">BLOCK</span> or a <span style="font-family: monospace">PRIMITIVE_TYPE</span> by the character <code>=</code><br />
&nbsp;
<div style="text-align: center"><img alt="" src="fileservlet?id=367851360867" style="width: 411px; height: 252px;" /></div>
<br />
Your mission: write a program that formats CGX content to make it readable!<br />
<br />
Beyond the rules below, the displayed result should not contain any space, tab, or carriage return. No other rule should be added.​
<ul>
	<li><span style="line-height: 1.6em;">The content of strings of characters must not be modified.</span></li>
	<li><span style="line-height: 1.6em;">A <span style="font-family: monospace">BLOCK</span> starts on its own line.</span></li>
	<li>The markers at the start and end of a BLOCK are in the same column.</li>
	<li><span style="line-height: 1.6em;">Each&nbsp;<span style="font-family: monospace">ELEMENT</span> </span>contained within a<span style="line-height: 1.6em;">&nbsp;BLOCK&nbsp;</span>is indented 4 spaces from the marker of that<span style="line-height: 1.6em;"> <span style="font-family: monospace">BLOCK</span>.</span></li>
	<li><span style="line-height: 1.6em;">A&nbsp;<span style="font-family: monospace">VALUE_KEY</span>&nbsp;</span>starts on its own line.<span style="line-height: 1.6em;">e.</span></li>
	<li><span style="line-height: 1.6em;">A&nbsp;<span style="font-family: monospace">PRIMITIVE_TYPE</span>&nbsp;</span>starts on its own line unless it is the value of a <span style="line-height: 1.6em;"><span style="font-family: monospace">VALUE_KEY</span>.</span></li>
</ul>
<strong>INPUT:</strong><br />
<strong>Line 1</strong>: The number N of CGX lines to be formatted<br />
<strong>The N following lines</strong>: The CGX content. Each line contains maximum 1000 characters. All the characters are ASCII.<br />
<br />
<strong>OUTPUT:</strong><br />
The formatted CGX content<br />
<br />
<strong>CONSTRAINTS :</strong><br />
The CGX content supplied will always be valid.<br />
The strings of characters do not include the character <code>&#39;</code><br />
<span style="font-family: monospace">0 &lt; N &lt; 10000</span>

<p><b style="line-height: 1.6em;">EXAMPLE :</b></p>

<div style="border: 1px solid black; width: 440px;">
<div style="float: left; margin-left: 10px; padding-left: 10px; width: 200px; font-family: monospace;">
<div><b>Input</b></div>

<div>4<br />
&nbsp;&nbsp;<br />
<br />
&nbsp;&nbsp; &nbsp; true</div>

<div>&nbsp;</div>
</div>

<div style="margin-left: 10px; float: left; padding-left: 5px; width: 200px; font-family: monospace;">
<div><b>Output</b></div>

<div>true</div>
</div>

<div style="clear: both;">&nbsp;</div>
</div>
&nbsp;

<div style="border: 1px solid black; width: 440px;">
<div style="float: left; margin-left: 10px; padding-left: 10px; width: 200px; font-family: monospace;">
<div><b>Input</b></div>

<div>1<br />
&#39;spaces and&nbsp;&nbsp; &nbsp;tabs&#39;</div>
</div>

<div style="margin-left: 10px; float: left; padding-left: 5px; width: 200px; font-family: monospace;">
<div><b>Output</b></div>

<div><span style="font-family: monospace;">&#39;spaces and&nbsp;&nbsp; &nbsp;tabs&#39;</span></div>
</div>

<div style="clear: both;">&nbsp;</div>
</div>
&nbsp;

<div style="border: 1px solid black; width: 440px;">
<div style="float: left; margin-left: 10px; padding-left: 10px; width: 200px; font-family: monospace;">
<div><b>Input</b></div>

<div>1<br />
(0)</div>

<div>&nbsp;</div>
</div>

<div style="margin-left: 10px; float: left; padding-left: 5px; width: 200px; font-family: monospace;">
<div><b style="font-family: monospace; font-size: 13px; ">Output</b></div>

<div>(<br />
&nbsp;&nbsp;&nbsp;&nbsp;0<br />
)</div>
</div>

<div style="clear: both;">&nbsp;</div>
</div>
&nbsp;

<div style="border: 1px solid black; width: 440px;">
<div style="float: left; margin-left: 10px; padding-left: 10px; width: 200px; font-family: monospace;">
<div><b>Input</b></div>

<div>1<br />
()</div>
</div>

<div style="margin-left: 10px; float: left; padding-left: 5px; width: 200px; font-family: monospace;">
<div><b style="font-family: monospace; font-size: 13px; ">Output</b></div>

<div>(<br />
​)</div>
</div>

<div style="clear: both;">&nbsp;</div>
</div>
&nbsp;

<div style="border: 1px solid black; width: 440px;">
<div style="float: left; margin-left: 10px; padding-left: 10px; width: 200px; font-family: monospace;">
<div><b>Input</b></div>

<div>1<br />
(0;1;2)</div>
</div>

<div style="margin-left: 10px; float: left; padding-left: 5px; width: 200px; font-family: monospace;">
<div><b style="font-family: monospace; font-size: 13px;">Output</b></div>

<div>(<br />
&nbsp;&nbsp;&nbsp;&nbsp;0;<br />
&nbsp;&nbsp;&nbsp;&nbsp;1;<br />
&nbsp;&nbsp;&nbsp;&nbsp;2<br />
​)</div>
</div>

<div style="clear: both;">&nbsp;</div>
</div>
&nbsp;

<div style="border: 1px solid black; width: 440px;">
<div style="float: left; margin-left: 10px; padding-left: 10px; width: 200px; font-family: monospace;">
<div><b>Input</b></div>

<div>1<br />
((&#39;k1&#39;=1);(&#39;k2&#39;=2))</div>
</div>

<div style="margin-left: 10px; float: left; padding-left: 5px; width: 200px; font-family: monospace;">
<div><b style="font-family: monospace; font-size: 13px;">Output</b></div>

<div>(<br />
&nbsp;&nbsp;&nbsp;&nbsp;(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;k1&#39;=1<br />
&nbsp;&nbsp;&nbsp;&nbsp;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;k2&#39;=2<br />
&nbsp;&nbsp;&nbsp;&nbsp;)<br />
)</div>
</div>

<div style="clear: both;">&nbsp;</div>
</div>
&nbsp;

<div style="border: 1px solid black; width: 440px;">
<div style="float: left; margin-left: 10px; padding-left: 10px; width: 200px; font-family: monospace;">
<div><b>Input</b></div>

<div>10<br />
&#39;users&#39;=((&#39;id&#39;=10;<br />
&#39;name&#39;=&#39;Serge&#39;;<br />
&#39;roles&#39;=(&#39;visitor&#39;;<br />
&#39;moderator&#39;<br />
));<br />
(&#39;id&#39;=11;<br />
&#39;name&#39;=&#39;Biales&#39;<br />
);<br />
true<br />
)</div>
</div>

<div style="margin-left: 10px; float: left; padding-left: 5px; width: 200px; font-family: monospace;">
<div><b style="font-family: monospace; font-size: 13px; ">Output</b></div>

<div>&#39;users&#39;=<br />
(<br />
&nbsp;&nbsp;&nbsp;&nbsp;(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;=10;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;name&#39;=&#39;Serge&#39;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;roles&#39;=<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;visitor&#39;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;moderator&#39;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br />
&nbsp;&nbsp;&nbsp;&nbsp;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;=11;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;name&#39;=&#39;Biales&#39;<br />
&nbsp;&nbsp;&nbsp;&nbsp;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;true<br />
)</div>
</div>

<div style="clear: both;">&nbsp;</div>
</div>
&nbsp;

<div style="border: 1px solid black; width: 440px;">
<div style="float: left; margin-left: 10px; padding-left: 10px; width: 200px; font-family: monospace;">
<div><b>Input</b></div>

<div>9<br />
( &#39;user&#39;= (<br />
&nbsp; &nbsp; &#39;key&#39;=&#39;1= t(c)(&#39;;<br />
&nbsp; &nbsp; &#39;valid&#39;=false<br />
&nbsp; );<br />
&nbsp;&nbsp;&#39;user&#39;=&nbsp;(<br />
&nbsp; &nbsp; &#39;key&#39;=&#39; = ; &#39;;<br />
&nbsp; &nbsp; &#39;valid&#39;= true<br />
&nbsp; ); ()<br />
​)</div>
</div>

<div style="margin-left: 10px; float: left; padding-left: 5px; width: 200px; font-family: monospace;">
<div><b style="font-family: monospace; font-size: 13px;">Output</b></div>

<div>(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&#39;user&#39;=<br />
&nbsp;&nbsp;&nbsp;&nbsp;(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;key&#39;=&#39;1= t(c)(&#39;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;valid&#39;=false<br />
&nbsp;&nbsp;&nbsp;&nbsp;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&#39;user&#39;=<br />
&nbsp;&nbsp;&nbsp;&nbsp;(<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;key&#39;=&#39; = ; &#39;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;valid&#39;=true<br />
&nbsp;&nbsp;&nbsp;&nbsp;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;(<br />
&nbsp;&nbsp;&nbsp;&nbsp;​)<br />
​)</div>
</div>

<div style="clear: both;">&nbsp;</div>
</div>
</div>
