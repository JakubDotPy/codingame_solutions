<h1>The Fall - Episode 2 - Code Golf</h1>

<a href="https://www.codingame.com/codegolf/hard/the-fall-episode-2-codesize">https://www.codingame.com/codegolf/hard/the-fall-episode-2-codesize</a>

<div id="statement_back" class="statement_back" style="display: none;">&nbsp;</div>
<div class="statement-body">
  <!-- GOAL -->
  <div class="statement-section statement-goal">
    <h2><span class="icon icon-goal">&nbsp;</span> <span>The Goal</span></h2>
    <div class="statement-goal-content">Your objective is to write a program capable of predicting the route Indy will take on his way down a tunnel.</div>
  </div>
  <!-- RULES -->
  <div class="statement-section statement-rules">
    <h2><span class="icon icon-rules">&nbsp;</span> <span>Rules</span></h2>
    <div>
      <div class="statement-rules-content">The structure of the tunnel hasn't changed. To review the types of rooms, click <span onclick="document.getElementById('pieces').style.display=(document.getElementById('pieces').style.display == 'block' ? 'none' : 'block');" style="text-decoration: underline;cursor: pointer; cursor: hand; color: #f2bb13;">here</span>.
        <div id="pieces" style="display: none;">
          <table style="color: #20252a; margin-left: auto; margin-right: auto; margin-top: 20px; text-align: center; border-spacing: 5px 5px; border-collapse: separate;">
            <colgroup>
              <col style="width: 120px; background-color: #eeeeee;" />
              <col style="width: 120px; background-color: #eeeeee;" />
              <col style="width: 120px; background-color: #eeeeee;" />
              <col style="width: 120px; background-color: #eeeeee;" />
            </colgroup>
            <tbody>
              <tr style="height: 120px;">
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_00.png" alt="" /><br /><em>Type 0</em></span></td>
                <td style="text-align: left; padding: 20px; vertical-align: middle;" colspan="3">This room type is not part of the tunnel per se as Indy cannot move across it.</td>
              </tr>
              <tr style="height: 120px;">
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_01.png" alt="" /><br /><em>Type 1</em></span></td>
                <td style="text-align: left; padding: 20px; vertical-align: middle;" colspan="3">The green arrows indicate Indy's possible paths through the room.</td>
              </tr>
              <tr style="height: 120px;">
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_02.png" alt="" /><br /><em>Type 2</em></span></td>
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_03.png" alt="" /><br /><em>Type 3</em></span></td>
                <td style="text-align: left; padding: 20px; vertical-align: middle;" colspan="2">Type 3 rooms are similar to type 2 rooms, but are rotated.</td>
              </tr>
              <tr style="height: 120px;">
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_04.png" alt="" /><br /><em>Type 4</em></span></td>
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_05.png" alt="" /><br /><em>Type 5</em></span></td>
                <td style="text-align: left; padding: 20px; vertical-align: middle;" colspan="2">A red arrow indicates a path that Indy cannot use to move across the room.</td>
              </tr>
              <tr style="height: 120px;">
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_06.png" alt="" /><br /><em>Type 6</em></span></td>
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_07.png" alt="" /><br /><em>Type 7</em></span></td>
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_08.png" alt="" /><br /><em>Type 8</em></span></td>
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_09.png" alt="" /><br /><em>Type 9</em></span></td>
              </tr>
              <tr style="height: 120px;">
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_10.png" alt="" /><br /><em>Type 10</em></span></td>
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_11.png" alt="" /><br /><em>Type 11</em></span></td>
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_12.png" alt="" /><br /><em>Type 12</em></span></td>
                <td><span><img src="https://cdn-games.codingame.com/the-last-crusade/indiana1/type_13.png" alt="" /><br /><em>Type 13</em></span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <br />However, at the beginning there is&nbsp;<strong>no longer an unbroken safe route</strong>&nbsp;from start to finish.<br /><br />Fortunately,&nbsp; <strong>certain rooms can now be rotated</strong>&nbsp;each turn by a quarter turn clockwise or counterclockwise.&nbsp;<strong>Some rooms are locked in place and cannot be rotated </strong>(these rooms have a negative type in the provided grid). Furthermore, you cannot rotate the rooms containing Indy or leading to the exit.<br /><br />This turn around, your mission consists of writing a <strong>program capable of rotating tunnel rooms in order to lead Indy to safety</strong>.<br /><br />For example:<br />&nbsp;
        <div style="text-align: center;"><img style="width: 100%; max-width: 700px;" src="https://files.codingame.com/codingame/indiana/question/rotation.png" alt="" /><br /><em>Spin the room (0,1) towards the right to establish a safe route to the exit.</em></div>
        <br /><br />Lastly, <strong>for the last two tests only</strong>,&nbsp;<strong>giant rocks can appear within the tunnel system.</strong>&nbsp;If Indy comes into contact with a rock, he dies.<br /><br /><br /><strong>The rocks have the following behavior:</strong>
        <ul>
          <li>They can arrive on any game turn.</li>
          <li>They only arrive from an edge of the grid.</li>
          <li>They follow the same rules of movement as Indy (and dissapear if they leave the grid).</li>
          <li>If a rock hits a wall or gets stuck, it will be destroyed and dissapear from the grid on the next turn.</li>
          <li>You cannot rotate a room containing a rock.</li>
          <li><strong>You do not need to anticipate the arrival of rocks in your algorithm</strong>: whatever choices you made before a rock appears, if you had a chance to win before the arrival, you will still have a chance after the arrival of the rock.</li>
        </ul>
        <br /><strong><span>On each game turn:</span></strong>
        <ul>
          <li><span>You are given Indy's current position.</span></li>
          <li>Then you can spin a room&nbsp;clockwise or counterclockwise with the&nbsp;<span style="font-family: Helvetiva, Arial, sans-serif;">commands</span>&nbsp;<code>LEFT</code>&nbsp;and&nbsp;<code>RIGHT</code>, or&nbsp;do nothing with the command&nbsp;<code>WAIT</code>.</li>
          <li>Indy will then advance to the next room according to the shape of the current room.</li>
        </ul>
      </div>
      <!-- Victory conditions -->
      <div class="statement-victory-conditions">
        <div class="icon victory">&nbsp;</div>
        <div class="blk">
          <div class="title">Victory Conditions</div>
          <div class="text">Indy reaches the exit</div>
        </div>
      </div>
      <!-- Lose conditions -->
      <div class="statement-lose-conditions">
        <div class="icon lose">&nbsp;</div>
        <div class="blk">
          <div class="title">Lose Conditions</div>
          <div class="text">
            <ul>
              <li>Indy slams into a wall while exiting a room (interrupted route): you have failed</li>
              <li>Indy finds himself in the same room as a rock on the same turn:&nbsp;you have failed</li>
              <li>Indy stops moving:&nbsp;you have failed</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- WARNING -->
  <div class="statement-section statement-warning">
    <h2><span class="icon icon-warning">&nbsp;</span> <span>Note</span></h2>
    <div class="statement-warning-content">The tests provided are similar to the validation tests used to compute the final score but remain different.</div>
  </div>
  <!-- PROTOCOL -->
  <div class="statement-section statement-protocol">
    <h2><span class="icon icon-protocol">&nbsp;</span> <span>Game Input</span></h2>
    <!-- Protocol block -->
    <div class="blk">
      <div class="text">The program must first read the initialization data from standard input. Then, within an infinite loop, read the data from the standard input related to the current position of Indy and provide to the standard output the expected data.</div>
    </div>
    <!-- Protocol block -->
    <div class="blk">
      <div class="title">Initialization input</div>
      <div class="text">
        <p><span class="statement-lineno">Line 1 : </span> 2 space separated integers <var>W</var> <var>H</var> specifying the width and height of the grid.</p>
        <p><span class="statement-lineno">Next <var>H</var> lines: </span> Each line represents a line in the grid and contains <var>W</var> space separated integers <var>T</var>. <var>T</var> specifies the type of the room. <strong>If T is negative, the room cannot be rotated.</strong></p>
        <p><span class="statement-lineno">Last line: </span> <strong>1</strong> integer <var>EX</var> specifying the coordinate along the X axis of the exit (always at the very bottom of the grid).</p>
      </div>
    </div>
    <!-- Protocol block -->
    <div class="blk">
      <div class="title">Input for one game turn</div>
      <div class="text">
        <p><span class="statement-lineno">Line 1 : </span> <var>XI YI POSI</var><br />(<var>XI, YI</var>) two integers to indicate Indy's current position on the grid.<br /><var>POSI</var> a single word indicating Indy's entrance point into the current room: <action>TOP</action> if Indy enters from above, <action>LEFT</action> if Indy enters from the left and <action>RIGHT</action> if Indy enters from the right.</p>
        <p><span class="statement-lineno">Next line: </span><var>R</var> an integer representing the number of rocks currently in the grid.</p>
        <p><span class="statement-lineno">Next R lines: </span>each line represents the position of a rock on the grid: <var>XR YR POSR</var> (same rules as Indy's XI YI POSI).</p>
      </div>
    </div>
    <!-- Protocol block -->
    <div class="blk">
      <div class="title">Output for one game turn</div>
      <div class="text"><strong>One line</strong> containing on of three commands:
        <ul>
          <li><var>X Y</var>
            <action>LEFT</action> : rotate the room at (<var>X Y</var>) by a quarter turn counterclockwise
          </li>
          <li><var>X Y</var>
            <action>RIGHT</action> : rotate the room at (<var>X Y</var>) by a quarter turn clockwise
          </li>
          <li>
            <action>WAIT</action> : don't rotate a room and wait for next turn
          </li>
        </ul>
      </div>
    </div>
    <!-- Protocol block -->
    <div class="blk">
      <div class="title">Constraints</div>
      <div class="text">0 &lt; <var>W</var> ≤ 20<br />0 &lt; <var>H</var> ≤ 20<br />0 ≤ <var>T</var> ≤ 13<br />0 ≤ <var>R</var> ≤ 10<br />0 ≤ <var>EX</var> &lt; W<br />0 ≤ <var>XI, XR, X</var> &lt; W<br />0 ≤ <var>YI, YR, Y</var> &lt; H
        <div class="timeout_text">Response time for one game ≤ 150ms</div>
      </div>
    </div>
    <!-- Protocol block -->
    <div class="blk">
      <div class="title">Example</div>
      <div class="text">
        <div class="statement-inout">
          <div class="statement-inout-in" style="background-color: white;">
            <div class="title" style="color: #989898; padding: 0;">Initialization input</div>
            <pre>2 4       (W H)
4 -3      (T T)
11 -10    (T T)
11 5      (T T)
2 3       (T T)
1	  (EX)
</pre>
          </div>
          <div class="statement-inout-in" style="background-color: white; text-align: center;">Grid with 2 columns, 4 lines. 2 of the rooms are locked.<br /><br /><img src="https://files.codingame.com/codingame/indiana/question/example2_0.png" /></div>
          <div class="statement-inout-out" style="background-color: white;">
            <div class="title" style="color: #989898; padding: 0;">No output expected</div>
          </div>
        </div>
        <div class="statement-inout">
          <div class="statement-inout-in" style="background-color: white;">
            <div class="title" style="color: #989898; padding: 0;">Input for turn 1</div>
            <pre>1 0 TOP<em>(XI YI POS)</em>
1      <em>(R)</em>
0 2 TOP<em>(XR YR POSR)</em></pre>
          </div>
          <div class="statement-inout-in" style="background-color: white; text-align: center;">Indy arrives in (1,0) from above. A rock appears in (0,2) from above.<br /><br /><img src="https://files.codingame.com/codingame/indiana/question/example2_1.png" /></div>
          <div class="statement-inout-out" style="background-color: white;">
            <div class="title" style="color: #989898; padding: 0;">Output for turn 1</div>
            0 1 RIGHT<br /><br />Rotate the room (0,1) to the right to create a route to the exit
          </div>
        </div>
        <div class="statement-inout">
          <div class="statement-inout-in" style="background-color: white;">
            <div class="title" style="color: #989898; padding: 0;">Input for turn 2</div>
            <pre>1 1 TOP  <em>(XI YI POS)</em>
1        <em>(R)</em>
1 2 LEFT <em>(XR YR POSR)</em></pre>
          </div>
          <div class="statement-inout-in" style="background-color: white; text-align: center;">Indy is now in (1,1). The rock is in (1,2)<br /><br /><img src="https://files.codingame.com/codingame/indiana/question/example2_2.png" /></div>
          <div class="statement-inout-out" style="background-color: white;">
            <div class="title" style="color: #989898; padding: 0;">Output for turn 2</div>
            WAIT<br /><br />The path is laid out, no need to move anything.
          </div>
        </div>
        <div class="statement-inout">
          <div class="statement-inout-in" style="background-color: white; text-align: center;"><img src="https://files.codingame.com/codingame/indiana/question/example2_3.png" /></div>
          <div class="statement-inout-out" style="background-color: white;">And so on until Indy reaches the exit at (1,3)</div>
        </div>
      </div>
    </div>
  </div>
</div>