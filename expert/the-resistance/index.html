<h1>The Resistance</h1>

<a href="https://www.codingame.com/training/expert/the-resistance">https://www.codingame.com/training/expert/the-resistance</a>

<div class="statement_back" id="statement_back" style="display:none">&nbsp;</div>

<div class="statement-body"><!-- GOAL -->
<div class="statement-section statement-goal">
<h2><span class="icon icon-goal">&nbsp;</span> <span>The Goal</span></h2>

<div class="statement-goal-content">You work in the National Resistance Museum and you just uncovered hundreds of documents which contain coded Morse transmissions. In the documents, none of the spaces have been transcribed to separate the letters and the words hidden behind the Morse sequence. Therefore, there may be several interpretations of any single decoded sequence.<br />
<br />
Your program must be able to determine the number of different messages that it&rsquo;s possible to obtain from one Morse sequence and a given dictionary.</div>
</div>
<!-- RULES -->

<div class="statement-section statement-rules">
<h2><span class="icon icon-rules">&nbsp;</span> <span>Rules</span></h2>

<div>
<div class="statement-rules-content">Morse is a code composed of dots and dashes representing the letters of the alphabet. Here is the transcription of an alphabet in Morse:
<table border="1" cellpadding="10" style="border-collapse: collapse; margin-top: 20px; margin-bottom:20px; width: 100%; font-family: monospace; font-size: 20px;">
	<tbody>
		<tr style="height: 26px;">
			<td>&nbsp;A &nbsp;<strong>.-</strong></td>
			<td>&nbsp;B &nbsp;<strong>-...</strong></td>
			<td>&nbsp;C &nbsp;<strong>-.-.</strong></td>
			<td>&nbsp;D &nbsp;<strong>-..</strong></td>
		</tr>
		<tr style="height: 26px;">
			<td>&nbsp;E &nbsp;<strong>.</strong></td>
			<td>&nbsp;F &nbsp;<strong>..-.</strong></td>
			<td>&nbsp;G &nbsp;<strong>--.</strong></td>
			<td>&nbsp;H &nbsp;<strong>....</strong></td>
		</tr>
		<tr style="height: 26px;">
			<td>&nbsp;I &nbsp;<strong>..</strong></td>
			<td>&nbsp;J &nbsp;<strong>.---</strong></td>
			<td>&nbsp;K &nbsp;<strong>-.-</strong></td>
			<td>&nbsp;L &nbsp;<strong>.-..</strong></td>
		</tr>
		<tr style="height: 26px;">
			<td>&nbsp;M &nbsp;<strong>--</strong></td>
			<td>&nbsp;N &nbsp;<strong>-.</strong></td>
			<td>&nbsp;O &nbsp;<strong>---</strong></td>
			<td>&nbsp;P &nbsp;<strong>.--.</strong></td>
		</tr>
		<tr style="height: 26px;">
			<td>&nbsp;Q &nbsp;<strong>--.-</strong></td>
			<td>&nbsp;R &nbsp;<strong>.-.</strong></td>
			<td>&nbsp;S &nbsp;<strong>...</strong></td>
			<td>&nbsp;T &nbsp;<strong>-</strong></td>
		</tr>
		<tr style="height: 26px;">
			<td>&nbsp;U &nbsp;<strong>..-</strong></td>
			<td>&nbsp;V &nbsp;<strong>...-</strong></td>
			<td>&nbsp;W &nbsp;<strong>.--</strong></td>
			<td>&nbsp;X &nbsp;<strong>-..-</strong></td>
		</tr>
		<tr style="height: 26px;">
			<td>&nbsp;Y &nbsp;<strong>-.--</strong></td>
			<td>&nbsp;Z &nbsp;<strong>--..</strong></td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
	</tbody>
</table>
Since none of the spaces have been transcribed, there may be several possible interpretations. For example, the sequence <strong>-....--.-.</strong> could be any of the following: <strong>BAC, BANN, DUC, DU TETE, ...</strong><br />
<br />
A human being can recognize where the segmentations should be made due to their knowledge of the language, but for a machine, it&rsquo;s harder. In order for your program to do the same, you are given a dictionary containing all of the right words.<br />
<br />
However, even with a dictionary, it&rsquo;s possible that a sequence might correspond to several valid messages (<strong>BAC</strong>, <strong>DUC</strong>, <strong>DU</strong> and <strong>TETE</strong> might be present in the dictionary of the previous example).<br />
<br />
<i>Source: ACM Contest Problems Archive</i></div>
</div>
</div>
<!-- PROTOCOL -->

<div class="statement-section statement-protocol">
<h2><span class="icon icon-protocol">&nbsp;</span> <span>Game Input</span></h2>
<!-- Protocol block -->

<div class="blk">
<div class="title">Input</div>

<div class="text">
<p><span class="statement-lineno">Line 1: </span>a Morse sequence with a maximum length <var>L</var></p>

<p><span class="statement-lineno">Line 2: </span>an integer <var>N</var> corresponding to the number of words in the dictionary</p>

<p><span class="statement-lineno">The N following lines: </span>one word from the dictionary per line. Each word has a maximum length M and only appears once in the dictionary.</p>
</div>
</div>
<!-- Protocol block -->

<div class="blk">
<div class="title">Output</div>

<div class="text">An integer <var>R</var> corresponds to the number of messages that it is possible to generate with the Morse sequence and the dictionary.</div>
</div>
<!-- Protocol block -->

<div class="blk">
<div class="title">Constraints</div>

<div class="text">
<p>0 &lt; <var>L</var> &lt; 100000</p>

<p>0 &lt; <var>N</var> &lt; 100000</p>

<p>0 &lt; <var>M</var> &lt; 20</p>

<p>0 &le; <var>R</var> &lt; 2^63</p>
</div>
</div>
<!-- Protocol block -->

<div class="blk">
<div class="title">Example</div>

<div class="text">
<div class="statement-inout">
<div class="statement-inout-in">
<div class="title">Input</div>

<pre>
......-...-..---.-----.-..-..-..
5
HELL
HELLO
OWORLD
WORLD
TEST</pre>
</div>

<div class="statement-inout-out">
<div class="title">Output</div>

<pre>
2</pre>
</div>
</div>
</div>
</div>
</div>
</div>
