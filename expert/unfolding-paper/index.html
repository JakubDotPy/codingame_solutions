<h1>Unfolding paper</h1>

<a href="https://www.codingame.com/training/expert/unfolding-paper">https://www.codingame.com/training/expert/unfolding-paper</a>

<div class="statement-body">
<div class="statement-section statement-goal">
   <h2><span class="icon icon-goal">&nbsp;</span><span>Goal </span></h2>
   <span class="question-statement">A sheet of paper is folded left-to-right then up-to-down <const>N</const> times. <br>Then you cut out a few shapes and unfold the sheet.<br><br>The task is to determine how many parts the sheet will break up to.<br><br><strong>Explanations</strong><br><br>Lets look at the example. It is a sheet of two pieces. One piece is one or more connected <const>#</const>'s. Note that cells adjacent diagonally are not connected.<br><br><pre style="font-family: monospace">###<br>#..<br>#.#</pre><br>Unfolding works as follow:<br>1) Down-to-up<br><br><pre style="font-family: monospace">#.#<br>#..<br>###<br>###<br>#..<br>#.#</pre><br>2) Right-to-left<br><br><pre style="font-family: monospace">#.##.#<br>..##..<br>######<br>######<br>..##..<br>#.##.#</pre><br>3) Go to 1, repeat N-1 times.<br><br>In this case N=1, so after unfolding there will be 5 pieces (four in the corners and one in the center).<br><br>Note that there are always as many horizontal folds as vertical ones: the number <var>N</var> of folds is really a number of double folds, once in each direction.</span>
</div>
<div class="statement-section statement-protocol">
   <div class="blk">
      <div class="title">Input</div>
      <div class="question-statement-input"><strong>Line 1:</strong> Single integer <var>N</var>.<br><strong>Line 2:</strong> Two space-separated integers <var>W</var> and <var>H</var> represent width and height of the folded sheet respectively.<br><strong>Next <var>H</var> lines:</strong> <var>W</var> characters, where <const>.</const> is hole and <const>#</const> is paper.</div>
   </div>
   <div class="blk">
      <div class="title">Output</div>
      <div class="question-statement-output"><strong>Line 1:</strong> An integer <var>M</var> &ndash; the number of parts.</div>
   </div>
   <div class="blk">
      <div class="title">Constraints</div>
      <div class="question-statement-constraints">1 &le; <var>W</var>, <var>H</var> &le; 100<br>1 &le; <var>N</var> &le; 10000<br>1 &le; <var>M</var> &le; 2&sup3;&sup1;</div>
   </div>
   <div class="blk">
      <div class="title">Example</div>
      <div class="statement-inout">
         <div class="statement-inout-in">
            <div class="title">Input</div>
            <pre class="question-statement-example-in">1
3 3
###
#..
#.#</pre>
         </div>
         <div class="statement-inout-out">
            <div class="title">Output</div>
            <pre class="question-statement-example-out">5</pre>
         </div>
      </div>
   </div>
</div>