<h1>Mathematics for big ears</h1>

<a href="https://www.codingame.com/training/expert/mathematics-for-big-ears">https://www.codingame.com/training/expert/mathematics-for-big-ears</a>

<div class="statement-body">
<div class="statement-section statement-goal">
   <h2><span class="icon icon-goal">&nbsp;</span><span>Goal </span></h2>
   <span class="question-statement">After having rung the bells https://www.codingame.com/training/medium/ring-the-bells (this puzzle is the second part of the bell themed puzzles), you will now learn how to find and count all the permutations that are generated by a set of permutations.<br>For example, if you have one permutation: <var>p=(1 2 3)</var>, you can compose it with itself and you get <var>q=(1 3 2)</var>. If you compose <var>q</var> and <var>p</var>, you get the null permutation <var>e=()</var> (the permutation that moves nothing). Here is the table of the operations below:<br><pre style="font-family: monospace">↱ | e | p | q<br>--+===+===+===<br>e ∥ e | p | q<br>--+---+---+---<br>p ∥ p | <const>q</const> | <var>e</var><br>--+---+---+---<br>q ∥ q | e | p</pre><br>This means that if you permute with <var>p</var> then with <var>q</var> (the <var>yellow</var> case in the table), you move nothing, that is <var>e</var>, the null permutation.<br>If you permute with <const>p</const> and again with <const>p</const>, you permute in fact with <const>q</const> (the <const>blue</const> case in the table).<br>In other words, there are only 3 distinct permutations that can be generated by <var>p</var>.<br><br>If you have the two permutations <var>p=(1 2)</var> and <var>q=(1 3)</var>, you will be able to generate 6 distinct permutations: <var>e=()</var>, <var>(1 2)</var>, <var>(1 3)</var>, <var>(2 3)</var>, <var>(1 2 3)</var> and <var>(1 3 2)</var>. The output must be 6.<br>Each combination of these two permutations <var>p</var> and <var>q</var> is one of these six, even <var>pqqqppqqp</var>, that is <var>pqp=(2 3)</var>.<br>The set of these six permutations is the third symmetric group (S3), the group of the bijections on a set of 3 elements.<br><br>The name of the tests and validators will help you debugging.<br><br><strong>A bit of mathematics</strong><br>A theorem by Cayley says that every finite group is isomorphic to a subgroup of a finite symmetric group.<br>You can find a copy of this subgroup in a finite symmetric group.<br>To be more precise, if a finite group G is generated by permutations of n elements, then there is a copy of G in the symmetric group on n elements.<br><br><strong>Teddy bears</strong><br>But why this poster image? Because it&rsquo;s the cover image of Charlemagne Palestine&rsquo;s album whose name is Music for big ears and it&rsquo;s repetitive music for a bell carillon.<br><br><strong>Some more mathematics, not needed to solve the puzzle</strong><br>Here&rsquo;s an explanation of the names of the groups, if you understand this paragraph, your ears are big.<br>* <var>Cn</var> are cyclic groups, the simplest groups you can build. They are the simple modular remainders when you calculate additions with modulus n.<br>* <var>Sn</var> are symmetric groups, for exemple S4 is the set of all the permutations you can imagine over 1 2 3 4.<br>* The <var>Klein group</var> is C2&times;C2, that is the addition over two coordinates with modulus 2: (0,0), (0,1), (1,0) and (1,1). Thus, (0,1)+(1,1)=(1,0) because 1+1=2=0 mod 2.<br>* <var>Dn</var> are dihedral groups, the groups of the isometries that keep the regular polygon with n vertices (eg symmetries and rotations).<br>* <var>H</var> is the group of quaternions (see the Quaternion multiplication by TheNinja medium puzzle about them), it&rsquo;s a model of the rotations of a cube (see the CodinDice puzzle by BlitzProg).<br>* <var>An</var> is the subgroup of SN whose permutations are even, that means that the number of wrongly ordered pair of elements&hellip; is even.<br>* <var>Fq</var> is not a group but a field with q elements (like R or C but with a finite number of elements). You meet such things when you code self-correcting codes, for example. If q is prime, Fq is just Z with addition and multiplication but with modulus q.<br>* <var>GL2(Fq)</var> is the group of the inversible tranformations of the 2&times;2 matrices whose elements are in Fq.<br><var>SL2(Fq)</var>, <var>PGL2(Fq)</var> and <var>PSL2(Fq)</var> are explained below. The centre Z of a group G is its subgroup that commutes with everyone, eg for all g in Z, for all h in G, gh=hg. A quotient is when you identify some kind of elements who satisfy a condition.<br>* The <var>group of the cube</var> is the group of symmetries and rotations (and so on) that keeps a cube.<br>* The <var>squares subgroups</var> of the Rubik&rsquo;s cube is the set of the moves such as R2U2D2. Here, we only look how it moves the vertices and the edges.<br>* The <var>M12 Mathieu</var> group is a sporadic group, one of the simple groups that can&rsquo;t be classified in other great families.</span>
</div>
<div class="statement-section statement-protocol">
   <div class="blk">
      <div class="title">Input</div>
      <div class="question-statement-input"><strong>First line</strong> The number n of permutations<br><strong>Next n lines</strong> A permutation</div>
   </div>
   <div class="blk">
      <div class="title">Output</div>
      <div class="question-statement-output">The size of the subgroup.</div>
   </div>
   <div class="blk">
      <div class="title">Constraints</div>
      <div class="question-statement-constraints">The final size is below 100,000.<br>You can assume that the given permutations are reduced (eg, what you can expect in the Ring the bells puzzle).</div>
   </div>
   <div class="blk">
      <div class="title">Example</div>
      <div class="statement-inout">
         <div class="statement-inout-in">
            <div class="title">Input</div>
            <pre class="question-statement-example-in">1
(1 2 3)</pre>
         </div>
         <div class="statement-inout-out">
            <div class="title">Output</div>
            <pre class="question-statement-example-out">3</pre>
         </div>
      </div>
   </div>
</div>