<h1>Ring the bells</h1>

<a href="https://www.codingame.com/training/medium/ring-the-bells">https://www.codingame.com/training/medium/ring-the-bells</a>

<div class="statement-body">
<div class="statement-section statement-goal">
   <h2><span class="icon icon-goal">&nbsp;</span><span>Goal </span></h2>
   <span class="question-statement">If you have 4 bells (say <const>1</const>, <const>2</const>, <const>3</const> and <const>4</const>), you can ring them in 24 ways: for example, <const>1</const>, <const>2</const>, <const>4</const> then <const>3</const>: <const>1 2 4 3</const> or <const>3</const>, <const>1</const>, <const>2</const> then <const>4</const>: <const>3 1 2 4</const>. You can ring the 24 melodies one by one; but how can someone (a monk or a priest) learn the full pattern of 24 melodies? They have developed mnemotechnical ways to remember them all and not to forget even one with what we call mathematical permutations.<br><strong>Plain Bob Minimus</strong> is such an algorithm. Here is its beginning:<br><pre style="font-family: monospace"><const>1 2 3 4</const>&rarr;<const>2 1 4 3</const>&rarr;<const>2 4 1 3</const>&rarr;<const>4 2 3 1</const>&rarr;<const>4 3 2 1</const>&rarr;<const>3 4 1 2</const></pre><br>A permutation of a set is a bijection (a one-to-one function) from the set onto itself, like a shuffle of the elements of the set. <br>We can describe <strong>Plain Bob Minimus</strong>&rsquo; permutations as <var>(1 2)(3 4)</var>&rarr;<var>(1 4)</var>&rarr;<var>(2 4)(1 3)</var>&rarr;<var>(2 3)</var>&rarr;<var>(4 3)(2 1)</var>.<br>First, <var>(1 2)(3 4)</var> exchanges the bells <const>1</const> and <const>2</const>, <const>3</const> and <const>4</const>.<br>Then <var>(1 4)</var> exchanges the bells <const>1</const> and <const>4</const>.<br>Then <var>(2 4)(1 3)</var> exchanges the bells <const>2</const> and <const>4</const>, <const>1</const> and <const>3</const>. And so on.<br>In blue, it&rsquo;s a list of bells, a melody with four bells. In yellow, it&rsquo;s the permutation that rearranges the bells from a melody to the next melody.<br><br>A permutation can move more than two bells. <var>(1 4 5)</var> is the permutation that sends <const>1</const>&rarr;<const>4</const>, <const>4</const>&rarr;<const>5</const> and <const>5</const>&rarr;<const>1</const> and does not move neither <const>2</const> nor <const>3</const> nor any other number (it&rsquo;s a 3-cycle).<br><br>Beware, because permutations are functions, <strong>you must compute them from right to left</strong>.<br><br>You have to <strong>print the resulting permutation</strong> from a succession of permutations, that is a product of disjoint cycles (no number may appear in more than one cycle).<br><br>Note that <var>(1 4)(2 3)</var> = <var>(4 1)(2 3)</var> = <var>(3 2)(4 1)</var> and so on. Write down the first in the lexicographic order where <var>(1 4)(2 3)</var>&lt;<var>(3 2)(4 1)</var>&lt;<var>(4 1)(2 3)</var>.<br>Don&rsquo;t print the 1-cycle permutations like <var>(1)</var> or <var>(3)</var> that move nothing in the decomposition even if they might be present as input. There might be only one permutation and the result might be the original. If the permutation moves nothing, print <var>()</var> (two parentheses).<br>Look at the examples below.<br><br>Example, <var>(1 3)(1 2 3)(1 3)</var>:<br><const>1</const>&rarr;3 then 3&rarr;1 then 1&rarr;<const>3</const><br><const>2</const>&rarr;2 then 2&rarr;3 then 3&rarr;<const>1</const><br><const>3</const>&rarr;1 then 1&rarr;2 then 2&rarr;<const>2</const><br>Conclusion, <var>(1 3)(1 2 3)(1 3)</var> = <var>(1 3 2)</var> (a 3-cycle).<br><br>The last example, <var>(1 2 3)(1 4 3)</var>:<br><const>1</const>&rarr;4 then 4&rarr;<const>4</const><br><const>2</const>&rarr;2 then 2&rarr;<const>3</const><br><const>3</const>&rarr;1 then 1&rarr;<const>2</const><br><const>4</const>&rarr;3 then 3&rarr;<const>1</const><br>Conclusion, <var>(1 2 3)(1 4 3)</var> = <var>(1 4)(2 3)</var> (two disjoint 2-cycle).</span>
</div>
<div class="statement-section statement-protocol">
   <div class="blk">
      <div class="title">Input</div>
      <div class="question-statement-input"><strong>Single line</strong> The succession of permutations.</div>
   </div>
   <div class="blk">
      <div class="title">Output</div>
      <div class="question-statement-output"><strong>Single line</strong> The result of their product.</div>
   </div>
   <div class="blk">
      <div class="title">Constraints</div>
      <div class="question-statement-constraints">The input is properly formatted (no unpaired parentheses, etc.)<br>1&le;<var>input</var>&le;5</div>
   </div>
   <div class="blk">
      <div class="title">Example</div>
      <div class="statement-inout">
         <div class="statement-inout-in">
            <div class="title">Input</div>
            <pre class="question-statement-example-in">(1 2)(2 3)</pre>
         </div>
         <div class="statement-inout-out">
            <div class="title">Output</div>
            <pre class="question-statement-example-out">(1 2 3)</pre>
         </div>
      </div>
   </div>
</div>