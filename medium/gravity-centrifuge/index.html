<h1>Gravity Centrifuge</h1>

<a href="https://www.codingame.com/training/medium/gravity-centrifuge">https://www.codingame.com/training/medium/gravity-centrifuge</a>

<div class="statement-body">
<div class="statement-section statement-goal">
   <h2><span class="icon icon-goal">&nbsp;</span><span>Goal </span></h2>
   <span class="question-statement">The program must output the result of tumbling a landscape a certain (large!) number of times.<br><br>Tumbling entails:<br>&ensp;&ndash; rotating the landscape counterclockwise by 90&deg;<br>&ensp;&ndash; letting the hash bits <const>#</const> fall down<br><br>The map is composed of <const>.</const> and <const>#</const>.<br><br>But wait&hellip; we're going to be tumbling the landscape so many times we might not live to see the result!  So instead of just typing the number of tumbles we want on a simple Gravity Tumbler, we're going to use a <strong>Gravity Centrifuge</strong> and its much improved tumbling capacity, relying on twin inertial drives and their incomparable frictionless movement induction.<br><br>The twin inertial drives are programmed with a bitstream used as such:<br>&ensp;&ndash; Both drives are gotten to roll with an initial momentum of <const>1</const>.<br>&ensp;&ndash; The bits operate on the drives in alternating order, from least significant bit on.  So bit 0 controls drive A, bit 1 drive B, bit 2 drive A again, and so on.<br>&ensp;&ndash; When the bit is set, the drive tumbles the landscape around as many times as the current value of its momentum.  It's all done by frictionless induction, so the drive's own momentum is unaffected.<br>&ensp;&ndash; Simultaneously and regardless of bit value, the drive accelerates its twin by the current value of its momentum.  Its own is still unaffected.<br>&ensp;&ndash; Control then shifts to the other drive for the next bit in the stream.<br><br>For convenience (and input size limitations), the operation bitstream is provided in octal. Yes, twin inertial drives are a wee bit baroque.<br><br><strong>Example</strong><br><br>Using binary bitstream <const>1010</const>, which we're reading right to left (lsb first, remember):<br><pre style="font-family: monospace">┌────────┬────────┬─────────┬──────────────────┐<br>│ A mom. │ B mom. │ Tumbles │ Action           │<br>├────────┼────────┼─────────┼──────────────────┤<br>│      1 │      1 │       0 │ 0 =&gt; no A tumble │<br>│      1 │      2 │       0 │ A induces 1 on B │<br>├────────┼────────┼─────────┼──────────────────┤<br>│      1 │      2 │       2 │ 1 =&gt; 2 B tumbles │<br>│      3 │      2 │       2 │ B induces 2 on A │<br>├────────┼────────┼─────────┼──────────────────┤<br>│      3 │      2 │       2 │ 0 =&gt; no A tumble │<br>│      3 │      5 │       2 │ A induces 3 on B │<br>├────────┼────────┼─────────┼──────────────────┤<br>│      3 │      5 │       7 │ 1 =&gt; 5 B tumbles │<br> (B would induce 5 on A here, but we're done anyway)<br>└────────┴────────┴─────────┴──────────────────┘</pre>The bitstream is then fully consumed and operation can stop. The landscape has been tumbled <const>7</const> times.<br><br><br>(This puzzle is a &ldquo;harder&rdquo; version of community puzzle &ldquo;Gravity Tumbler&rdquo;. You may want to solve that one first.)</span>
</div>
<div class="statement-section statement-protocol">
   <div class="blk">
      <div class="title">Input</div>
      <div class="question-statement-input"><strong>Line 1:</strong> two space-separated integers: the map <var>width</var> and <var>height</var><br><strong>Line 2:</strong> the <var>operation</var> bitstream, in octal form<br><strong>Next <var>height</var> lines:</strong> <var>width</var> characters (empty bits <const>.</const> and heavy bits <const>#</const>)</div>
   </div>
   <div class="blk">
      <div class="title">Output</div>
      <div class="question-statement-output">For an odd tumble count: <var>width</var> lines of <var>height</var> characters where the <const>#</const> are at the bottom.<br>For an even tumble count: <var>height</var> lines of <var>width</var> characters.</div>
   </div>
   <div class="blk">
      <div class="title">Constraints</div>
      <div class="question-statement-constraints">0 &lt; <var>width</var> &le; 100<br>0 &lt; <var>height</var> &le; 100<br>0 &lt; number of bits &le; 29999<br>The input map is in a &ldquo;stable&rdquo; configuration, i.e. the heavy bits are already at the bottom.</div>
   </div>
   <div class="blk">
      <div class="title">Example</div>
      <div class="statement-inout">
         <div class="statement-inout-in">
            <div class="title">Input</div>
            <pre class="question-statement-example-in">17 5
1
.................
.................
...##...###..#...
.####..#####.###.
#################
</pre>
         </div>
         <div class="statement-inout-out">
            <div class="title">Output</div>
            <pre class="question-statement-example-out">....#
....#
....#
....#
....#
...##
...##
...##
...##
...##
...##
..###
..###
..###
..###
..###
..###
</pre>
         </div>
      </div>
   </div>
</div>