<h1>Chained Matrix Products</h1>

<a href="https://www.codingame.com/training/medium/chained-matrix-products">https://www.codingame.com/training/medium/chained-matrix-products</a>

<div class="statement-body">
<div class="statement-section statement-goal">
   <h2><span class="icon icon-goal">&nbsp;</span><span>Goal </span></h2>
   <span class="question-statement">The matrix product is an operation that, given matrices A[i,k] (i rows and k columns) and B[k,j], produces matrix C[i,j] where C_x,y is, for each x in 1..i and y = 1..j, the sum of A_x,z*B_z,y for all z in 1..k<br>One can see that i*j*k multiplications are needed to compute C.<br><br>Matrix product is an associative operation. This means that given matrices A, B and C with consistent dimensions, then (A.B).C = A.(B.C) = A.B.C; in other words the result remains the same whatever the product order.<br><br><strong>But complexity is not associative!</strong> Given A[3,1000], B[1000,5] and C[5,2000] for example:<br>- (A.B).C requires 3x1000x5 + 3x5x2000 = 45.000 multiplications<br>- A.(B.C) requires 1000x5x2000 + 3x1000x2000 = 16.000.000 multiplications!!!<br>And this is a (bit extreme) case for 2 products, but the longer the product chain, the more important the difference can be.<br><br>The goal is, given <var>N</var> pairs of dimensions, to compute the least number of multiplications needed.<br><br>Note 1: Actually, there are more efficient algorithms for matrix product that use for example divide and conquer to reduce complexity. But we will only consider the common way described above.<br>For more information, you can have a look at Strassen or Coppersmith&ndash;Winograd algorithms.<br>Note 2: This product ordering optimization works anyway for different matrix product algorithms.</span>
</div>
<div class="statement-section statement-protocol">
   <div class="blk">
      <div class="title">Input</div>
      <div class="question-statement-input"><strong>Line 1:</strong> The number <var>N</var> of matrices to multiply.<br><strong>Next <var>N</var> lines:</strong> Two space-separated integers <var>row</var> and <var>col</var>, dimensions of the <var>N</var> matrices.</div>
   </div>
   <div class="blk">
      <div class="title">Output</div>
      <div class="question-statement-output">The least number of multiplications needed to compute product.</div>
   </div>
   <div class="blk">
      <div class="title">Constraints</div>
      <div class="question-statement-constraints">3 &le; <var>N</var> &le; 100<br>0 &lt; <var>row</var>,<var>col</var> &le; 2000<br>Dimensions are product-compatible (<strong>id est</strong> each <var>col</var> is equal to next line's <var>row</var>)</div>
   </div>
   <div class="blk">
      <div class="title">Example</div>
      <div class="statement-inout">
         <div class="statement-inout-in">
            <div class="title">Input</div>
            <pre class="question-statement-example-in">3
3 1000
1000 5
5 2000</pre>
         </div>
         <div class="statement-inout-out">
            <div class="title">Output</div>
            <pre class="question-statement-example-out">45000</pre>
         </div>
      </div>
   </div>
</div>