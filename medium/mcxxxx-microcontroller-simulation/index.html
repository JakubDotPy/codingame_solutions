<h1>MCxxxx microcontroller simulation</h1>

<a href="https://www.codingame.com/training/medium/mcxxxx-microcontroller-simulation">https://www.codingame.com/training/medium/mcxxxx-microcontroller-simulation</a>

<div class="statement-body">
<div class="statement-section statement-goal">
   <h2><span class="icon icon-goal">&nbsp;</span><span>Goal </span></h2>
   <span class="question-statement">This puzzle is directly inspired by the game SHENZHEN I/O<br>If you like this puzzle, please go check out this game (trust me, you'll love it).<br>Steam : https://store.steampowered.com/app/504210/SHENZHEN_IO/<br>GOG.com : https://www.gog.com/fr/game/shenzhen_io<br><br>MCxxxx Language official documentation : https://usermanual.wiki/Document/SHENZHENIOManual.736522646/view<br><br><strong>---  Puzzle  ---</strong><br><br>In this puzzle you will be asked to create a simple emulator for a microcontroller from the MCxxxx family. Specifically, a simplified version of the MC6000 microcontroller that we will call MC5999.<br><br>MC5999 features :<br><br> - (2) general-purpose registers (acc, dat)<br> - (2) Xbus pins (x0, x1)<br><br>Registers :<br><br> - acc : stores the result of an arithmetic instruction<br> - dat : used for temporary storage of a value<br> - x0 and x1 : Xbus pins (used respectively for input and output)<br><br>Microcontrollers of the MCxxxx family take use of a unique programming language (similar to assembler). Please note that some instructions of this language will not be included as they are not necessary for this puzzle. All instructions below are necessary for this puzzle.<br><br>Captions :<pre style="font-family: monospace"><br>| Notation |       Meaning       |<br>|    R     |       Register      |<br>|    I     |       Integer       |<br>|   R/I    | Register or integer |<br>|    L     |       Label         |</pre><br>Basic instructions :<pre style="font-family: monospace"><br> - mov <var>R/I</var> <var>R</var> : Copy the value of the first operand into the second operand<br> - jmp <var>L</var> : Jump to the instruction following the specified label</pre><br>Arithmetic instructions :<pre style="font-family: monospace"><br>The result of an arithmetic instruction will always be stored in the acc register.<br><br> - add <var>R/I</var> : Add the value of the first operand to the value of the acc register<br> - sub <var>R/I</var> : Subtract the value of the first operand to the value of the acc register<br> - mul <var>R/I</var> : Multiply the value of the first operand by the value of the acc register<br> - not : If the value in acc is 0, store a value of 100 in acc. Otherwise, store a value of 0 in acc<br> - dgt <var>R/I</var> : Isolate the specified digit of the value in the acc register and stores it in<br>the acc register<br> - dst <var>R/I</var> <var>R/I</var> : Isolate the digit of acc specified by the first operand and set it to<br>the value of the second operand<br><br>Examples of the dgt and dst instructions:<br><br>| acc | Instruction | acc' |  | acc | Instruction | acc' |<br>| 596 |    dgt 0    |   6  |  | 596 |  dst 0 7    | 597  |<br>| 596 |    dgt 1    |   9  |  | 596 |  dst 1 7    | 576  |<br>| 596 |    dgt 2    |   5  |  | 596 |  dst 2 7    | 796  |</pre><br>Branching (a.k.a. Test) instructions :<pre style="font-family: monospace"><br> - teq <var>R/I</var> <var>R/I</var> : Test if the value of the first operand is equal to <br>the value of the second operand<br><br> - tgt <var>R/I</var> <var>R/I</var> : Test if the value of the first operand is (strictly) <br>greater than the value of the second operand<br><br> - tlt <var>R/I</var> <var>R/I</var> : Test if the value of the first operand is (strictly) <br>less than the value of the second operand<br><br> - tcp <var>R/I</var> <var>R/I</var> : Compare the value of the first operand with <br>the value of the second operand<br><br>Behavior of the tcp (A) (B) instruction :<br><br>| Case  | Effect on '+' instructions | Effect on '-' instructions |<br>| A &gt; B |          Enabled           |         Disabled           |<br>| A = B |          Disabled          |         Disabled           |<br>| A &lt; B |          Disabled          |         Enabled            |<br></pre><br>Conditional Execution :<br><br>   All instructions in the MCxxxx programming language are capable of <strong>conditional execution</strong>. Prefixing an instruction with a <var>+</var> or <var>-</var> symbol will cause that instruction to be <strong>enabled</strong> or <strong>disabled</strong> by test instructions. When an instruction is disabled by a test instruction, it will be skipped. Instructions with no prefix are never disabled and always execute normally.<br><var>+</var> and <var>-</var> instructions are both disabled by default.<br>For all test instructions (except for tcp) <var>+</var> and <var>-</var> can be interpreted as enabled when a test case is <var>true</var> or <var>false</var> respectively. All test instructions will affect all <var>+</var> and <var>-</var> prefixed instructions until another test instruction is executed.<br><br>For example :<br>If we execute the operation &quot;tgt 5 0&quot;, 5 is greater than 0, so instructions with the prefix &quot;+&quot; <br>will be executed and instructions with the prefix &quot;-&quot; will be skipped.<br>Other prefixes :<pre style="font-family: monospace"><br>   Lines with the prefix <var>#</var> are considered as comments and <strong>shall not be executed</strong>.<br>   Lines with the prefix <var>@</var> shall only be <strong>executed one time</strong>.</pre><br>Labels :<br><br>Labels are single words ending with the suffix <var>:</var>.<br>Note that an instruction can be placed after a label. This instructions will not have any prefix as the label itself already counts as a prefix.<br><br>Xbus pins:<br><br>For this puzzle you are provided with two Xbus &quot;pins&quot; x0 and x1.<br>x0 is used for input, meaning that when the program asks you to take a value from the x0 register you need to take it from the &quot;input data&quot; line. Similarly x1 is used as an output so when the program asks you to place a value in the x1 register, this value will be part of the output of your solution.</span>
</div>
<div class="statement-section statement-protocol">
   <div class="blk">
      <div class="title">Input</div>
      <div class="question-statement-input">You will receive multiple lines of text representing a source code in the MCxxxx language.<br><br><strong>Line 1 :</strong> An integer <var>K</var> representing the length of the <var>Input Data</var> array<br><strong>Line 2 :</strong> <var>K</var> integers separated by white spaces representing your <var>Input Data</var><br><strong>Line 3 :</strong> An integer <var>N</var> representing the number of lines of code<br><strong>Next <var>N</var> lines :</strong> A <var>Line of code</var></div>
   </div>
   <div class="blk">
      <div class="title">Output</div>
      <div class="question-statement-output"><strong>Line 1 :</strong> The program's <var>Output Data</var> represented by integers separated by white spaces</div>
   </div>
   <div class="blk">
      <div class="title">Constraints</div>
      <div class="question-statement-constraints">1 &le; <var>K</var> &le; 100<br>1 &le; <var>N</var> &le; 20<br><br>-999 &le; <var>D</var> &le; 999 for any integer <var>D</var> within the Input and Output Data.<br><br>At the start of a program, the registers will contain a value of 0.<br><br>Registers can store integer values between -999 and 999, inclusive. If an arithmetic operation would produce a result outside this range, the closest allowed value is stored instead. For example, if acc contains the value 800 and the instruction add 400 is executed, then the value 999 will be stored in acc.<br><br>The program will always output at least one value.<br><br>There cannot be two labels with the same name.<br><br>Special case : <strong>dst</strong> <var>A</var> <var>B</var> and <strong>dgt</strong> <var>A</var> furthermore require 0 &le; <var>A</var> &le; 2 and 0 &le; <var>B</var> &le; 9.</div>
   </div>
   <div class="blk">
      <div class="title">Example</div>
      <div class="statement-inout">
         <div class="statement-inout-in">
            <div class="title">Input</div>
            <pre class="question-statement-example-in">1
2
1
mov x0 x1</pre>
         </div>
         <div class="statement-inout-out">
            <div class="title">Output</div>
            <pre class="question-statement-example-out">2</pre>
         </div>
      </div>
   </div>
</div>